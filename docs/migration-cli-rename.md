# CLI Rename Migration: dre 参照の棚卸し

## 調査日時

2026-01-17

## 検索コマンド

```bash
rg -n "\bdre\b" .
rg -n "dre-" .
rg -n "DRE" .
```

---

## 分類別ヒット一覧

### code（実行コード）

| ファイル:行 | 要約 |
|------------|------|
| `src/cli.ts:17` | CLI名 `.name("dre")` |
| `src/commands/doctor.ts:85` | 診断メッセージ "DRE Configuration Diagnostic" |
| `src/commands/serve.ts:31` | 起動メッセージ "Starting DRE Copy Server" |
| `src/commands/job.ts:28,67,112,151,167,194,221` | コメント `// dre job ls/add/update/rm/enable/disable/show` |
| `src/commands/db.ts:23,56` | コメント `// dre db reset/info` |
| `src/commands/mail.ts:51,126,157` | コメント、案内メッセージ |
| `src/commands/run-due.ts:117,176,181,197,200` | ログ・案内メッセージ（dre run-due, dre mail reset, dre doctor） |
| `src/server/index.ts:5,22` | コメント、サーバ名 "DRE Copy Server" |
| `src/server/views/copy-page.ts:33,125,168` | HTMLタイトル "Copy Prompt - DRE", フッター "DRE CLI v3.0" |
| `src/services/mailer.ts:165,222` | メール本文 "Generated by DRE CLI v3.0"、件名 "[DRE] Book Digest" |

### test

| ファイル:行 | 要約 |
|------------|------|
| `test/server/prompt-route.test.ts:91` | 期待値 `expect(json.name).toBe("DRE Copy Server")` |

### config

| ファイル:行 | 要約 |
|------------|------|
| `package.json:2` | パッケージ名 `"name": "dre"` |
| `package.json:8` | bin コマンド `"dre": "./dist/cli.js"` |
| `package-lock.json:2,8,23` | 同上（自動生成） |
| `config/jobs.yaml:13` | ジョブ名 `claude-dre-coding` |

### docs

| ファイル | 要約 |
|---------|------|
| `docs/setup.md` | セットアップガイド（約30箇所） |
| `docs/ops.md` | 運用ガイド（約25箇所） |
| `docs/windows-task-scheduler.md` | タスクスケジューラ設定（約15箇所） |
| `docs/plans/*.instruction.md` | 各種指示書（多数） |

### ops（自動実行箇所）

| ファイル:行 | 要約 |
|------------|------|
| `ystemctl status tailscale-serve:1-13` | systemd サービス `dre-serve.service` の状態出力（一時ファイル） |

### ci

該当なし（.github/, .gitlab* 等にdre参照なし）

### misc

| ファイル | 要約 |
|---------|------|
| `ystemctl status tailscale-serve` | 一時的に生成されたファイル（削除推奨） |

---

## 残数サマリ

| 分類 | 件数 |
|------|------|
| code | 約25箇所 |
| test | 1箇所 |
| config | 4箇所 |
| docs | 約70箇所 |
| ops/ci | 1箇所（一時ファイル） |
| **総計** | **約100箇所** |

### ops/ci 内訳

- **repo内**: 0件（CI設定ファイルなし）
- **repo外**: TODO（下記参照）

### repo外 TODO

以下のファイルに `dre` が残っていないか運用確認し、リネーム時に `dre` へ更新する必要がある：

- `/etc/systemd/system/dre-serve.service`
- その他 systemd/cron 設定ファイル

**確認担当**: 運用担当者（サーバ管理者）
**確認タイミング**: Task2（置換実施）の前
